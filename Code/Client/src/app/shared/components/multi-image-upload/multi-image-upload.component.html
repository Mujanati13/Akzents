<div>
  <label *ngIf="label" class="block text-sm font-medium text-gray-700 mb-2">{{ label }}</label>

  <!-- Single container with border -->
  <div class="border border-gray-200 rounded-md {{ containerWidth }} {{ containerHeight }} p-2 pt-1">
    <!-- Loop through rows -->
    <div *ngFor="let row of imageRows; let i = index; let last = last">
      <!-- Image row -->
      <div class="pt-1">
        <!-- Image preview when available -->
        <div *ngIf="row.preview" class="flex items-center py-1">
          <!-- Image thumbnail -->
          <div class="w-[76px] h-[56px] rounded overflow-hidden flex-shrink-0 bg-gray-50 mr-3">
            <img [src]="row.preview" alt="Image Preview" class="w-full h-full object-cover" />
          </div>
          <!-- Filename and label -->
          <div class="flex flex-col flex-grow">
            <span class="text-sm font-medium">{{ row.label }}</span>
            <span class="text-xs text-gray-500">{{ row.fileName }}</span>
          </div>
          <!-- Delete button -->
          <button type="button" (click)="removeImage(i)" class="text-red-500 hover:text-red-700 flex items-center p-2">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM12 10.9L10.9 12L8 9.1L5.1 12L4 10.9L6.9 8L4 5.1L5.1 4L8 6.9L10.9 4L12 5.1L9.1 8L12 10.9Z" />
            </svg>
          </button>
        </div>

        <!-- Upload placeholder when no image -->
        <div *ngIf="!row.preview" class="flex items-center cursor-pointer h-[60px]" (click)="fileInput.click()">
          <!-- Light blue container for upload icon -->
          <div class="bg-blue-50 w-[90px] h-[52px] rounded flex items-center justify-center">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="text-gray-500">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
            </svg>
          </div>
          <!-- Show label for empty image slots -->
          <span class="ml-3 text-sm font-medium">{{ row.label }}</span>
          <input #fileInput type="file" (change)="onFileChange($event, i)" class="hidden" accept="image/*" />
        </div>
      </div>

      <!-- Add divider if not the last item -->
      <div *ngIf="!last" class="border-t border-gray-200 my-1"></div>
    </div>
  </div>
</div>
